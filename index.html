<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Indian Hut Scene</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <style>
      body {
        margin: 0;
      }
    </style>
  </head>
  <body>
    <a-scene>
      <!-- VR Controller -->
      <a-entity
        laser-controls="hand: right"
        raycaster="objects: .clickable"
        line="color: red; opacity: 0.75"
      ></a-entity>

      <!-- Assets -->
      <a-assets>
        <img id="skyImage" src="assets/sky.jpg" />
        <a-asset-item
          id="hutModel"
          src="assets/huthouse/scene.gltf"
        ></a-asset-item>
        <a-asset-item
          id="bookModel"
          src="assets/book/scene.gltf"
        ></a-asset-item>
        <a-asset-item
          id="tabelModel"
          src="assets/tabel/scene.gltf"
        ></a-asset-item>
        <a-asset-item
          id="melonModel"
          src="assets/food/scene.gltf"
        ></a-asset-item>
        <a-asset-item id="potModel" src="assets/pot/scene.gltf"></a-asset-item>
        <a-asset-item
          id="wellModel"
          src="assets/well/scene.gltf"
        ></a-asset-item>
        <a-asset-item
          id="treeModel"
          src="assets/tree/scene.gltf"
        ></a-asset-item>
        <a-asset-item
          id="plantModel"
          src="assets/plant/scene.gltf"
        ></a-asset-item>
        <a-asset-item
          id="kiteModel"
          src="assets/kite/scene.gltf"
        ></a-asset-item>
        <a-asset-item
          id="chairModel"
          src="assets/chair/scene.gltf"
        ></a-asset-item>
        <a-asset-item id="bedModel" src="assets/bed/scene.gltf"></a-asset-item>
        <a-asset-item
          id="indiankidsModel"
          src="assets/kids/IndianKids.glb"
        ></a-asset-item>
        <a-asset-item
          id="indianwomenModel"
          src="assets/women/scene.gltf"
        ></a-asset-item>
        <a-asset-item
          id="bananaModel"
          src="assets/banana/scene.gltf"
        ></a-asset-item>
      </a-assets>

      <!-- Sky and Lights -->
      <a-sky src="#skyImage" rotation="0 -90 0"></a-sky>
      <a-entity
        light="type: directional; color: #fff6cc; intensity: 1.2"
        position="2 4 3"
      ></a-entity>
      <a-entity light="type: ambient; intensity: 0.6"></a-entity>

      <!-- Ground -->
      <a-plane
        rotation="-90 0 0"
        width="30"
        height="30"
        color="#edc9af"
      ></a-plane>
      <!-- Hut -->
      <a-entity
        id="centerHut"
        gltf-model="#hutModel"
        position="-2 0 -5"
        rotation="0 180 0"
        scale="2 2 2"
      ></a-entity>

      <!-- Objects -->
      <a-entity
        gltf-model="#treeModel"
        position="-8 0 -10"
        scale="2 2 2"
      ></a-entity>
      <a-entity
        gltf-model="#bookModel"
        position="1.7 0.6 -3"
        scale="0.2 0.2 0.2"
        rotation="-90 0 -180"
      ></a-entity>
      <a-entity
        gltf-model="#tabelModel"
        position="-2 0 -1.5"
        scale="1 1 1"
      ></a-entity>
      <a-entity
        gltf-model="#melonModel"
        class="clickable"
        position="-2 0.5 -1.5"
        scale="0.001 0.001 0.001"
        rotation="0 -97.67 0"
        animation__shake="property: rotation; dir: alternate; dur: 200; loop: true; easing: easeInOutSine; to: 1 -97.67 1"
        animation__click="property: rotation; to: 0 360 0; dur: 2000; startEvents: click"
        debug-click
      >
      </a-entity>
      <a-entity
        gltf-model="#potModel"
        position="-4.5 0.5 -3"
        scale="0.01 0.01 0.01"
      ></a-entity>
      <a-entity
        gltf-model="#plantModel"
        position="5 0 -8"
        scale="0.3 0.3 0.3"
      ></a-entity>
      <a-entity
        gltf-model="#kiteModel"
        position="5 0 -8"
        scale="0.3 0.3 0.3"
        animation__fly="property: position; dir: alternate; dur: 4000; easing: easeInOutSine; loop: true; to: 1 5 -6"
        animation__flutter="property: rotation; dir: alternate; dur: 800; easing: easeInOutSine; loop: true; to: 0 0 20"
      ></a-entity>
      <a-entity
        gltf-model="#chairModel"
        position="-2 0 -2"
        scale="0.1 0.1 0.1"
      ></a-entity>
      <a-entity
        gltf-model="#bedModel"
        position="3 0 -3"
        scale="0.3 0.3 0.3"
      ></a-entity>

      <!-- ðŸ§’ Indian Kids with Controller Rotation thumbstick-rotate="speed: 3"-->
      <a-entity
        gltf-model="#indiankidsModel"
        position="-7 0.7 -1"
        scale="2 2 2"
        rotation="0 -97.67 0"
        animation="property: rotation; to: 0 263 0; loop: true; dur: 10000; easing: linear"
      >
        ></a-entity
      >

      <!-- ðŸ‘© Indian Woman -->
      <a-entity
        gltf-model="#indianwomenModel"
        position="2.5 0.7 -3.5"
        scale="1 1 1"
        rotation="0 -97.67 0"
      ></a-entity>

      <!-- ðŸŒ Banana -->
      <a-entity
        gltf-model="#bananaModel"
        position="3 0 -8"
        scale="0.8 0.8 0.8"
      ></a-entity>

      <!-- Well -->
      <a-entity
        gltf-model="#wellModel"
        position="2 0 -7.5"
        scale="0.3 0.3 0.3"
      ></a-entity>

      <!-- Camera + Cursor -->
      <a-entity id="cameraRig" position="0 1.6 3">
        <a-camera>
          <a-cursor raycaster="objects: .clickable"></a-cursor
        ></a-camera>
      </a-entity>
    </a-scene>

    <!-- âœ… Controller Rotation Component Script -->
    <!-- <script>
      AFRAME.registerComponent("thumbstick-rotate", {
        schema: {
          speed: { type: "number", default: 2 },
        },
        init: function () {
          const el = this.el;
          this.el.sceneEl.addEventListener("controllerconnected", (evt) => {
            const controller = evt.detail;
            controller.addEventListener("thumbstickmoved", (e) => {
              if (Math.abs(e.detail.x) > 0.2) {
                const rotation = el.getAttribute("rotation");
                rotation.y += e.detail.x * this.data.speed;
                el.setAttribute("rotation", rotation);
              }
            });
          });
        },
      });
    </script> -->
    <script>
      AFRAME.registerComponent("debug-click", {
        init: function () {
          this.el.addEventListener("click", () => {
            console.log("âœ… Melon clicked!");
          });
        },
      });
    </script>
  </body>
</html>
